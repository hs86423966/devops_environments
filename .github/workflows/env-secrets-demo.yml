name: Environment Secrets Demo

on:
  push:
    branches:
      - main

jobs:
  deploy-dev:
    name: Deploy to Dev
    runs-on: ubuntu-latest
    environment: dev
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Show Dev environment secrets
        run: |
          echo "Deploying to DEV environment"
          echo "DB_USER: ${{ secrets.DB_USER }}"
          echo "DB_SERVER: ${{ secrets.DB_SERVER }}"
          echo "Deployment simulation complete"
        env:
          DB_USER: ${{ secrets.DB_USER }}
          DB_PASS: ${{ secrets.DB_PASS }}
          DB_SERVER: ${{ secrets.DB_SERVER }}

  deploy-uat:
    name: Deploy to UAT
    runs-on: ubuntu-latest
    needs: deploy-dev
    environment:
      name: uat
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Show UAT environment secrets
        run: |
          echo "Deploying to UAT environment"
          echo "DB_USER: ${{ secrets.DB_USER }}"
          echo "DB_SERVER: ${{ secrets.DB_SERVER }}"
          echo "Deployment simulation complete"
        env:
          DB_USER: ${{ secrets.DB_USER }}
          DB_PASS: ${{ secrets.DB_PASS }}
          DB_SERVER: ${{ secrets.DB_SERVER }}

  deploy-prod:
    name: Deploy to Prod
    runs-on: ubuntu-latest
    needs: deploy-uat
    environment:
      name: prod
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Show Prod environment secrets
        run: |
          echo "Deploying to PROD environment"
          echo "DB_USER: ${{ secrets.DB_USER }}"
          echo "DB_SERVER: ${{ secrets.DB_SERVER }}"
          echo "Deployment simulation complete"
        env:
          DB_USER: ${{ secrets.DB_USER }}
          DB_PASS: ${{ secrets.DB_PASS }}
          DB_SERVER: ${{ secrets.DB_SERVERÂ }}